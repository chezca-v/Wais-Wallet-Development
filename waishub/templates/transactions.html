{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transactions</title>
  <link rel="stylesheet" href="{% static 'css/transactions.css' %}">
</head>
<body>
  <!-- Sidebar -->
<aside class="sidebar">
  <div>
    <div class="navbar">
      <img src="{% static 'assets/logo.png' %}" alt="Logo" class="navbar-logo">
      <div class="welcome-texts">
        <p class="hello-text">Hello, {{ user.get_full_name|default:user.username }}! <br> Welcome to</p>
        <p class="wallet-name">Wais Wallet</p>
      </div>
    </div>
    
    </div>    
    <nav class="nav-links">
      <a href="{% url 'dashboard' %}">Dashboard</a> 
      <a href="{% url 'add_transaction' %}">Add Transaction</a>  
      <a href="{% url 'transactions' %}">Transactions</a>
    
      <div class="dropdown">
        <button class="dropbtn">
          Evaluation
          <img src="{% static 'assets/dropdown.png' %}" alt="Dropdown Icon" class="dropdown-img">
        </button>
        <div class="dropdown-content">
          <a href="analytics.html">Analytics</a>
          <a href="{% url 'totalincome' %}">Total Income</a>
          <a href="{% url 'totalexpenses' %}">Total Expenses</a>
          <a href="{% url 'savings' %}">Savings</a>
        </div>
      </div>
    
      <a href="{% url 'budget' %}">Budgets</a>
      <a href="{% url 'settings' %}">Settings</a>
      <a href="{% url 'aboutus' %}">About Us</a>
    </nav>
    
  <div class="account-section">
    <a href="{% url 'logout' %}">
    <div class="account-icon" id="logout-button">ðŸ‘¤</div> 
    <div class="account-info">
      <div class="account-label">LOGOUT</div>
      <div class="account-name">{{ user.get_full_name|default:user.username }}</div>
    </a>
  </div>
  
</aside>

  <!-- Main Content -->
  <div class="main-content">
    <div class="content-header">Transactions</div>

    <!-- Month Tabs -->
    <div class="month-tabs">
      {% for month in months %}
        <a href="?month={{ month }}">
          <div class="month-tab {% if selected_month == month %}active{% endif %}">
            {{ month }}
          </div>
        </a>
      {% endfor %}
    </div>

    {% if transactions %}
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Category</th>
          <th>Amount (â‚±)</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for transaction in transactions %}
        <tr>
          <td class="transaction-type {{ transaction.type|lower }}">{{ transaction.type|title }}</td>
          <td>{{ transaction.category }}</td>
          <td class="transaction-amount {{ transaction.type|lower }}">â‚±{{ transaction.amount }}</td>
          <td>{{ transaction.date }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <div class="empty-state">
    No transactions{% if selected_month %} for {{ selected_month }}{% endif %}.
  </div>
    {% endif %}
  </div>

  <script>
    const tabs = document.querySelectorAll('.month-tab');
    const emptyState = document.querySelector('.empty-state');

    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        tabs.forEach(t => t.classList.remove('active'));
        tab.classList.add('active');

        if (emptyState) {
          emptyState.textContent = `No transactions for ${tab.textContent}.`;
        }
      });
    });
  </script>
</body>
</html>
